<!doctype html>
<html lang="en">

<head>
	<title>Ultimate Links - Flamepass</title>
	<link rel="icon" type="icon/x-icon" href="/assets/favicon.ico" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<meta charset="UTF-8" />
	<meta name="description"
		content="Flamepass: The Ultimate School Dashboard with games, website proxies, tools, AI chat & more. Your all-in-one student resource hub.." />
	<meta name="keywords" content="Proxy, Unblocker, Flamepass Unblocker, Flamepass" />
	<meta property="og:image" content="/assets/logo.webp" />
	<!-- Google Analytics DO NOT REMOVE -->
	<meta name="google-adsense-account" content="ca-pub-3747175608041884" />
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-SPVQHBL4J1"></script>
	<script>
		window.dataLayer = window.dataLayer || [];
		function gtag() {
			dataLayer.push(arguments);
		}
		gtag('js', new Date());

		gtag('config', 'G-SPVQHBL4J1');
	</script>

	<link rel="preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" />
	<link rel="preload" as="style"
		href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,100..1000;1,9..40,100..1000&display=swap" />
	<link rel="stylesheet" href="/css/index.css" />
	<link rel="stylesheet" href="/css/themes.css" />
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" />
	<link rel="stylesheet"
		href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..400,0..1" />
	<script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>
	<link rel="stylesheet" href="/css/common.css" />
	<style>
		.links-container {
			max-width: 1000px;
			margin: 0 auto;
			padding: 100px 20px 50px 80px;
		}

		.page-title {
			text-align: center;
			color: white;
			font-size: 2.5rem;
			font-weight: 600;
			margin-bottom: 15px;
		}

		.page-description {
			text-align: center;
			color: rgba(255, 255, 255, 0.7);
			max-width: 800px;
			margin: 0 auto 30px;
			font-size: 1.1rem;
		}

		.search-container {
			max-width: 600px;
			margin: 0 auto 40px;
		}

		.search-input {
			width: 100%;
			background-color: rgba(46, 46, 46, 0.7);
			border: 1px solid #3a3a3a;
			color: white;
			padding: 12px 20px;
			border-radius: 30px;
			font-size: 1rem;
			outline: none;
			transition: border-color 0.3s, box-shadow 0.3s;
		}

		.search-input:focus {
			border-color: #de5c34;
			box-shadow: 0 0 0 2px rgba(222, 92, 52, 0.2);
		}

		.category {
			margin-bottom: 40px;
		}

		.category-title {
			color: white;
			margin-bottom: 15px;
			font-size: 1.5rem;
			font-weight: 600;
			position: relative;
			display: flex;
			align-items: center;
		}

		.category-title::after {
			content: '';
			position: absolute;
			left: 0;
			bottom: -5px;
			width: 40px;
			height: 3px;
			background-color: #de5c34;
		}

		.category-icon {
			font-size: 1.4rem;
			margin-right: 10px;
			color: #de5c34;
		}

		.status-icon {
			font-size: 0.8rem;
			margin-left: 10px;
			vertical-align: middle;
		}

		.status-flourishing {
			color: #4CAF50;
		}

		.status-stable {
			color: #2196F3;
		}

		.status-unstable {
			color: #FFC107;
		}

		.status-ghosted {
			color: #F44336;
		}

		.status-fresh {
			color: #9C27B0;
		}

		.links-grid {
			display: grid;
			grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
			gap: 15px;
		}

		.link-item {
			background-color: rgba(46, 46, 46, 0.7);
			border-radius: 8px;
			padding: 12px 15px;
			color: white;
			text-decoration: none;
			transition: transform 0.3s, background-color 0.3s, box-shadow 0.3s;
			display: flex;
			align-items: center;
			word-break: break-all;
			border: 1px solid #3a3a3a;
			cursor: pointer;
		}

		.link-item:hover {
			background-color: rgba(56, 56, 56, 0.8);
			transform: translateY(-3px);
			box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
			border-color: #de5c34;
		}

		.link-icon {
			margin-right: 10px;
			color: #de5c34;
			font-size: 1.2rem;
			flex-shrink: 0;
		}

		.no-results {
			text-align: center;
			padding: 30px;
			color: rgba(255, 255, 255, 0.7);
			font-size: 1.1rem;
			grid-column: 1 / -1;
		}

		.copy-btn {
			background-color: transparent;
			border: none;
			color: #de5c34;
			cursor: pointer;
			margin-left: auto;
			padding: 5px;
			border-radius: 50%;
			display: flex;
			align-items: center;
			justify-content: center;
			transition: background-color 0.3s;
		}

		.copy-btn:hover {
			background-color: rgba(222, 92, 52, 0.1);
		}


		.filter-container {
			display: flex;
			justify-content: center;
			margin-bottom: 30px;
			flex-wrap: wrap;
			gap: 10px;
		}

		.filter-btn {
			background-color: rgba(46, 46, 46, 0.7);
			border: 1px solid #3a3a3a;
			color: white;
			padding: 8px 15px;
			border-radius: 20px;
			cursor: pointer;
			transition: background-color 0.3s, border-color 0.3s;
			font-size: 0.9rem;
		}

		.filter-btn.active {
			background-color: #de5c34;
			border-color: #de5c34;
		}

		.filter-btn:hover:not(.active) {
			background-color: rgba(56, 56, 56, 0.8);
			border-color: #de5c34;
		}

		/* Link submission button and form styles */
		.submit-link-btn {
			display: block;
			width: 100%;
			max-width: 300px;
			margin: 20px auto 30px;
			background-color: #de5c34;
			color: white;
			border: none;
			border-radius: 30px;
			padding: 12px 20px;
			font-size: 1.1rem;
			font-weight: 600;
			text-align: center;
			cursor: pointer;
			transition: background-color 0.3s, transform 0.2s;
		}

		.submit-link-btn:hover {
			background-color: #e76b45;
			transform: translateY(-2px);
		}

		.submit-link-btn i {
			padding-right: 10px;
		}

		/* Modal styles */
		.modal-overlay {
			position: fixed;
			top: 0;
			left: 0;
			right: 0;
			bottom: 0;
			background-color: rgba(0, 0, 0, 0.7);
			display: none;
			align-items: center;
			justify-content: center;
			z-index: 1000;
			opacity: 1!important;
			visibility: visible!important;
		}

		.modal {
			background-color: #1e1e1e;
			border-radius: 10px;
			box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
			padding: 30px;
			width: 90%;
			max-width: 450px;
			position: absolute;
			border: 1px solid rgba(255, 102, 0, 0.3);
		}

		.modal-close {
			position: absolute;
			top: 15px;
			right: 15px;
			color: #aaaaaa;
			font-size: 20px;
			cursor: pointer;
			transition: color 0.3s ease;
		}

		.modal-close:hover {
			color: #ff6600;
		}

		.modal-header {
			text-align: center;
			margin-bottom: 25px;
		}

		.modal-header h2 {
			color: #ffffff;
			margin-bottom: 10px;
			font-size: 24px;
			font-weight: 700;
			margin: 0;
		}

		.modal-header p {
			color: #aaaaaa;
			margin-top: 4px;
			font-size: 16px;
		}

		.form-group {
			display: flex;
			flex-direction: column;
			gap: 5px;
			text-align: left;
			margin-bottom: 15px;
		}

		.form-group label {
			color: white;
			font-size: 1rem;
			margin-bottom: 5px;
		}

		.form-group input,
		.form-group select,
		.form-group textarea {
			background-color: rgba(30, 30, 30, 0.7);
			border: 1px solid #3a3a3a;
			border-radius: 5px;
			padding: 10px 12px;
			color: white;
			font-size: 1rem;
			outline: none;
			transition: border-color 0.3s, box-shadow 0.3s;
		}

		.form-group input:focus,
		.form-group select:focus,
		.form-group textarea:focus {
			border-color: #ff6600;
			box-shadow: 0 0 0 2px rgba(255, 102, 0, 0.2);
		}

		.form-group textarea {
			min-height: 80px;
			resize: vertical;
		}

		.form-hint {
			color: rgba(255, 255, 255, 0.5);
			font-size: 0.8rem;
			margin-top: 2px;
		}

		.submit-link-form {
			display: flex;
			flex-direction: column;
			gap: 15px;
		}

		.submit-btn {
			background-color: #ff6600;
			color: white;
			border: none;
			border-radius: 5px;
			padding: 12px;
			font-size: 1rem;
			font-weight: 600;
			cursor: pointer;
			transition: background-color 0.3s, transform 0.2s;
			margin-top: 10px;
			width: 100%;
		}

		.submit-btn:hover {
			background-color: #ff8033;
			transform: translateY(-2px);
		}

		.login-alert {
			background-color: rgba(244, 67, 54, 0.2);
			color: #F44336;
			border: 1px solid rgba(244, 67, 54, 0.3);
			padding: 15px;
			border-radius: 5px;
			text-align: center;
			margin-top: 15px;
		}

		.success-message,
		.error-message {
			padding: 15px;
			border-radius: 5px;
			text-align: center;
			margin-top: 15px;
		}

		.success-message {
			background-color: rgba(76, 175, 80, 0.2);
			color: #4CAF50;
			border: 1px solid rgba(76, 175, 80, 0.3);
		}

		.error-message {
			background-color: rgba(244, 67, 54, 0.2);
			color: #F44336;
			border: 1px solid rgba(244, 67, 54, 0.3);
		}

		.lock-icon {
			position: absolute;
			right: 50%;
			color: white;
			font-size: 1.5rem;
			z-index: 10;
			/* Ensure lock appears above blur */
		}

		.blurred-link {
			filter: blur(5px);
			pointer-events: none;
			position: relative;
		}

		@media (max-width: 768px) {
			.links-grid {
				grid-template-columns: 1fr;
			}

			.category-title {
				margin-left: 20px;
			}

			.links-container {
				padding: 100px 15px 50px 60px;
			}

			.filter-container {
				justify-content: flex-start;
				padding-left: 20px;
				overflow-x: auto;
				padding-bottom: 10px;
			}
		}
	</style>
</head>

<body>

	<ul class="navbar">
		<li style="margin-left: -1px; margin-top: 2px">
			<a href="/"><img class="logo" src="/assets/logo.webp" alt="Logo" /></a>
		</li>
		<hr style="margin-top: 5px" />
		<li>
			<a href="/" title="Home">
				<span style="margin-top: 0px" class="material-symbols-outlined">cottage</span>
			</a>
		</li>
		<li>
			<a href="/&.html" title="Search">
				<span class="material-symbols-outlined">public</span>
			</a>
		</li>
		<hr>
		<li>
			<a href="/a.html" title="Apps">
				<span class="material-symbols-outlined">apps</span>
			</a>
		</li>
		<li>
			<a href="/g.html" title="Games">
				<span class="material-symbols-outlined">joystick</span>
			</a>
		</li>
		<li>
			<a href="/downloadable-games.html" title="Downloadable Games">
				<span class="material-symbols-outlined">download</span>
			</a>
		</li>
		<hr>
		<li>
			<a href="/ultimate-links.html" title="Ultimate Link List">
				<span id="navactive" class="material-symbols-outlined">list</span>
			</a>
		</li>
		<li>
			<a href="/links.html" title="Link Generator">
				<span class="material-symbols-outlined">link</span>
			</a>
		</li>
		<hr>

		<li>
			<a href="/guides.html" title="Guides and Methods">
				<span class="material-symbols-outlined">help_outline</span>
			</a>
		</li>

		<li>
			<a href="/yt-channels.html" title="Unblocker YouTube Channels">
				<span class="material-symbols-outlined">play_circle</span>
			</a>
		</li>
		<hr>
		<li>
			<a href="/ai.html" title="AI Chat">
				<span class="material-symbols-outlined">smart_toy</span>
			</a>
		</li>
		<hr />
		<li>
			<a href="/~.html" title="Settings">
				<span style="margin-top: 0" class="material-symbols-outlined">tune</span>
			</a>
		</li>
		<li>
			<a target="_blank" href="https://discord.com/invite/gVaXCTqJDq" title="Discord Server">
				<div style="height: 40px !important; width: 40px !important; margin-top: 10px; margin-bottom: -6px;">
					<i class="fa-brands fa-discord" style="transform: translateY(-6px)"></i>
				</div>
			</a>
		</li>
	</ul>
	<div class="scrolltop">
		<span class="material-symbols-outlined">arrow_upward</span>
	</div>

	<div class="links-container">
		<h1 class="page-title">Ultimate Links List</h1>
		<p class="page-description">The #1 collection of proxy links for school. Use these links to
			bypass filters and enjoy unrestricted internet access.</p>

		<div class="search-container">
			<input type="text" class="search-input" placeholder="Search for proxies, games, apps..." id="searchInput">
		</div>

		<!-- Submit Link Button (moved to top) -->
		<button id="submitLinkButton" class="submit-link-btn">
			<i class="fa-solid fa-plus"></i> Submit a Link
		</button>

		<div class="filter-container" id="filterButtons">
			<!-- Filter buttons will be added by JavaScript -->
		</div>

		<div id="linksContent">
			<!-- Categories and links will be added by JavaScript -->
		</div>
	</div>

	<!-- Submit Link Modal -->
	<div class="modal-overlay" id="submitLinkModal">
		<div class="modal">
			<div class="modal-close" id="closeSubmitModal">
				<i class="fa-solid fa-xmark"></i>
			</div>
			<div class="modal-header">
				<h2>Submit a Link</h2>
				<p>Found a working proxy? Submit it for approval!</p>
			</div>

			<form id="submitLinkForm" class="submit-link-form">
				<div class="form-group">
					<label for="categorySelect">Category</label>
					<select id="categorySelect" required>
						<option value="" disabled selected>Select a category</option>
						<!-- Categories will be populated via JavaScript -->
					</select>
				</div>

				<div class="form-group">
					<label for="linkInput">Link URL</label>
					<input type="text" id="linkInput" placeholder="example.com" required>
					<small class="form-hint">Full links (https://...) work too</small>
				</div>

				<div class="form-group">
					<label for="notesInput">Additional Notes (optional)</label>
					<textarea id="notesInput" placeholder="Any additional information about this link..."></textarea>
				</div>

				<button type="submit" class="submit-btn">Submit Link</button>
			</form>

			<div id="loginAlert" class="login-alert" style="display: none;">
				<i class="fa-solid fa-triangle-exclamation"></i> You must be logged in to submit a link.
				<a href="/login.html" style="color: #ff6600; text-decoration: underline;">Log in</a>
			</div>

			<div id="submitSuccessMessage" class="success-message" style="display: none;">
				Thank you! Your link has been submitted for review.
			</div>

			<div id="submitErrorMessage" class="error-message" style="display: none;">
				There was an error submitting your link. Please try again.
			</div>
		</div>
	</div>


	<div style="z-index: -998">
		<div style="z-index: -998; position: fixed" class="blob"></div>
		<div style="z-index: -998; position: fixed" class="blobbig"></div>
		<div style="z-index: -998; position: fixed" class="blobsmall"></div>
		<div style="z-index: -998; position: fixed" class="blobtop"></div>
		<div style="z-index: -999; position: fixed" id="particles-js"></div>
	</div>

	<script>
		document.addEventListener('DOMContentLoaded', () => {
				// Load links from external JSON file
				async function loadLinksData() {
					try {
						const response = await fetch('/json/links.json');
						if (!response.ok) {
							throw new Error('Failed to load links data');
						}
						return await response.json();
					} catch (error) {
						console.error('Error loading links:', error);
						// Fallback to hardcoded data if JSON file can't be loaded
						return {
							categories: proxyCategories
						};
					}
				}

				// This is the hardcoded data that will be used as fallback
				const proxyCategories = [
					{
						name: "Interstellar",
						icon: "fa-solid fa-rocket",
						status: "flourishing",
						description: "Games, Apps, and Proxy",
						links: [
							"https://gointerstellar.app",
							"https://nomorefemboyfriday.unibutton.com/",
							"https://matheiuslikesmen.bouncers4rent.com/",
							"https://dipakarmani.blinklab.com/",
							"https://nirmad23.blinklab.com/",
							"https://reshamvip.blinklab.com/",
							"https://alumulakakro.unibutton.com/",
							"https://arraypush.unibutton.com/",
							"https://hamburgerxtreme.unibutton.com/",
							"https://mayalu.unibutton.com/",
							"https://sitarabhajangi.unibutton.com/",
							"https://learningmath.pages.dev/"
						]
					},
					{
						name: "Shadow Browser",
						icon: "fa-solid fa-ghost",
						status: "flourishing",
						description: "Web Browser",
						links: [
							"https://saturnacademy.altgothic.com/",
							"https://midashasgold.skibiditoi.lat/",
							"https://sayless.series.3.suarakeadilan.org/",
							"https://giggitygoogitygoo.crepito.ar/",
							"https://bippityboppityboo.nerdinator.net/",
							"https://grantisnotking.tuplantaforma.com/",
							"https://geography.narayangiri.com.np/",
							"https://erm.marztk.com/",
							"https://oil.radicalnetworks.org/",
							"https://jerimiahthe.nerdinator.net/",
							"https://phoyesdumpling.evoluciondigitalia.cl/",
							"https://joyridejerimiah.assenov.net/",
							"https://lovedumplings.gitadhakal.com.np/",
							"https://d-e-a-r-day.is.trash.amberwithcamera.com/",
							"https://theoiscrashingout.gruponet.com.ar/"
						]
					}
					// Other categories would be included here...
				];

				const linksContent = document.getElementById('linksContent');
				const searchInput = document.getElementById('searchInput');
				const filterButtons = document.getElementById('filterButtons');
				const submitLinkButton = document.getElementById('submitLinkButton');
				const submitLinkModal = document.getElementById('submitLinkModal');
				const submitLinkForm = document.getElementById('submitLinkForm');
				const categorySelect = document.getElementById('categorySelect');
				const submitSuccessMessage = document.getElementById('submitSuccessMessage');
				const submitErrorMessage = document.getElementById('submitErrorMessage');
				const loginAlert = document.getElementById('loginAlert');
				const submitBtn = submitLinkForm.querySelector('.submit-btn');

				// Submission cooldown tracking
				let isSubmitting = false;
				let lastSubmissionTime = 0;
				const SUBMISSION_COOLDOWN = 60000; // 60 seconds cooldown

				submitLinkModal.style.display = "none";

				// Add filter buttons
				function addFilterButtons() {
					// Add All button
					const allButton = document.createElement('button');
					allButton.className = 'filter-btn active';
					allButton.textContent = 'All';
					allButton.dataset.filter = 'all';
					filterButtons.appendChild(allButton);

					// Add status filter buttons
					const statuses = [
						{ name: 'Flourishing', icon: 'fa-solid fa-check-circle status-flourishing' },
						{ name: 'Stable', icon: 'fa-solid fa-circle-check status-stable' },
						{ name: 'Unstable', icon: 'fa-solid fa-triangle-exclamation status-unstable' },
						{ name: 'Ghosted', icon: 'fa-solid fa-ghost status-ghosted' },
						{ name: 'Fresh', icon: 'fa-solid fa-sparkles status-fresh' }
					];

					statuses.forEach(status => {
						const button = document.createElement('button');
						button.className = 'filter-btn';
						button.innerHTML = `<i class="${status.icon}"></i> ${status.name}`;
						button.dataset.filter = status.name.toLowerCase();
						filterButtons.appendChild(button);
					});

					// Add event listeners
					document.querySelectorAll('.filter-btn').forEach(btn => {
						btn.addEventListener('click', () => {
							document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
							btn.classList.add('active');
							filterLinks(btn.dataset.filter);
						});
					});
				}

				// Create and display categories and links
				async function displayLinks() {
					// Load links data (from JSON file if possible, fallback to hardcoded)
					const linksData = await loadLinksData();
					const categories = linksData.categories || proxyCategories;

					linksContent.innerHTML = '';

					categories.forEach(category => {
						const categoryEl = document.createElement('div');
						categoryEl.className = 'category';
						categoryEl.dataset.status = category.status;

						// Get status icon and text
						let statusIcon, statusClass, statusText;
						switch (category.status) {
							case 'flourishing':
								statusIcon = 'fa-check-circle';
								statusClass = 'status-flourishing';
								statusText = 'Flourishing';
								break;
							case 'stable':
								statusIcon = 'fa-circle-check';
								statusClass = 'status-stable';
								statusText = 'Stable';
								break;
							case 'unstable':
								statusIcon = 'fa-triangle-exclamation';
								statusClass = 'status-unstable';
								statusText = 'Unstable';
								break;
							case 'ghosted':
								statusIcon = 'fa-ghost';
								statusClass = 'status-ghosted';
								statusText = 'Ghosted';
								break;
							case 'fresh':
								statusIcon = 'fa-sparkles';
								statusClass = 'status-fresh';
								statusText = 'Fresh';
								break;
							default:
								statusIcon = 'fa-circle-info';
								statusClass = '';
								statusText = 'Unknown';
						}

						categoryEl.innerHTML = `
                    <div class="category-title">
                        <i class="${category.icon} category-icon"></i>
                        ${category.name}
                        <i class="fa-solid ${statusIcon} status-icon ${statusClass}" title="${statusText}"></i>
                        <span style="font-size: 0.9rem; margin-left: 10px; opacity: 0.7;">${category.description}</span>
                    </div>
                    <div class="links-grid" id="${category.name.toLowerCase().replace(/\s+/g, '-')}-links"></div>
                `;

						linksContent.appendChild(categoryEl);

						const linksGrid = document.getElementById(`${category.name.toLowerCase().replace(/\s+/g, '-')}-links`);

						// Add links
						category.links.forEach((link, index) => {
							const linkItem = document.createElement('div');
							linkItem.className = 'link-item';

							// Only apply blur if user is not logged in and past first 3 links
							if (!window.isLoggedIn && window.isLoggedIn() === false && index >= 3) {
								linkItem.classList.add('blurred-link');
							}

							linkItem.innerHTML = `
                        <i class="fa-solid fa-link link-icon"></i>
                        <span class="link-text">${link}</span>
                        <button class="copy-btn" data-link="${link}" title="Copy link">
                            <i class="fa-regular fa-copy"></i>
                        </button>
                        ${(!window.isLoggedIn || window.isLoggedIn() === false) && index >= 3 ? '<i class="fa-solid fa-lock lock-icon"></i>' : ''}
                    `;

							linksGrid.appendChild(linkItem);

							// Add copy functionality
							const copyBtn = linkItem.querySelector('.copy-btn');
							copyBtn.addEventListener('click', (e) => {
								e.stopPropagation();
								const linkToCopy = copyBtn.dataset.link;
								navigator.clipboard.writeText(linkToCopy)
									.then(() => {
										console.log('Link copied to clipboard!');
									})
									.catch(err => {
										console.error('Failed to copy: ', err);
									});
							});

							// Make entire item clickable to open link (if not blurred)
							if (!linkItem.classList.contains('blurred-link')) {
								linkItem.addEventListener('click', (e) => {
									if (!e.target.classList.contains('copy-btn') && !e.target.classList.contains('fa-copy')) {
										window.open(link, '_blank');
									}
								});
							}
						});
					});

					// Populate the category select dropdown in the submission form
					populateCategoryDropdown(categories);
				}

				// Populate category dropdown from existing categories
				function populateCategoryDropdown(categories) {
					// Clear existing options except the first one
					while (categorySelect.options.length > 1) {
						categorySelect.remove(1);
					}

					// Add options to select dropdown
					categories.forEach(category => {
						const option = document.createElement('option');
						option.value = category.name;
						option.textContent = category.name;
						categorySelect.appendChild(option);
					});

					// Add "Game Sites" and "Other" options if they don't already exist
					const existingCategories = Array.from(categorySelect.options).map(opt => opt.value);

					if (!existingCategories.includes("Game Sites")) {
						const gameOption = document.createElement('option');
						gameOption.value = "Game Sites";
						gameOption.textContent = "Game Sites";
						categorySelect.appendChild(gameOption);
					}

					if (!existingCategories.includes("Other")) {
						const otherOption = document.createElement('option');
						otherOption.value = "Other";
						otherOption.textContent = "Other";
						categorySelect.appendChild(otherOption);
					}

					// Remember the selected category for approval process
					categorySelect.addEventListener('change', function () {
						localStorage.setItem('approvalCategory', this.value);
					});
				}

				// Filter links based on search input
				function searchLinks() {
					const searchTerm = searchInput.value.toLowerCase();
					let hasResults = false;

					document.querySelectorAll('.category').forEach(category => {
						let categoryHasResults = false;
						const linksGrid = category.querySelector('.links-grid');
						const links = linksGrid.querySelectorAll('.link-item');

						links.forEach(link => {
							const linkText = link.querySelector('.link-text').textContent.toLowerCase();
							if (linkText.includes(searchTerm)) {
								link.style.display = 'flex';
								categoryHasResults = true;
								hasResults = true;
							} else {
								link.style.display = 'none';
							}
						});

						// Show/hide category based on results
						category.style.display = categoryHasResults ? 'block' : 'none';
					});

					// Show no results message if needed
					const noResultsMessage = document.querySelector('.no-results');
					if (noResultsMessage) {
						noResultsMessage.remove();
					}

					if (!hasResults && searchTerm !== '') {
						const noResults = document.createElement('div');
						noResults.className = 'no-results';
						noResults.innerHTML = 'No matching links found. Try a different search term.';
						linksContent.appendChild(noResults);
					}
				}

				// Filter links based on status
				function filterLinks(status) {
					document.querySelectorAll('.category').forEach(category => {
						if (status === 'all' || category.dataset.status === status) {
							category.style.display = 'block';
						} else {
							category.style.display = 'none';
						}
					});
				}

				// Function to ensure links are displayed correctly based on login status
				function fixBlurIssue() {
					// Get user login status directly from auth-controller.min.js
					const userLoggedIn = window.isLoggedIn ? window.isLoggedIn() : false;

					// Loop through each category
					document.querySelectorAll('.category').forEach(category => {
						// Get all links in the category
						const links = Array.from(category.querySelectorAll('.link-item'));

						links.forEach((link, index) => {
							// If user is logged in, remove blur from all links
							if (userLoggedIn) {
								link.classList.remove('blurred-link');

								// Remove any lock icons
								const lockIcon = link.querySelector('.lock-icon');
								if (lockIcon) {
									lockIcon.remove();
								}

								// Make links clickable
								link.style.pointerEvents = 'auto';
							}
							// If user is not logged in, ensure first 3 are not blurred
							else if (index < 3) {
								link.classList.remove('blurred-link');

								// Remove any lock icons
								const lockIcon = link.querySelector('.lock-icon');
								if (lockIcon) {
									lockIcon.remove();
								}

								// Make first 3 links clickable
								link.style.pointerEvents = 'auto';
							}

							// Make links clickable
							if (!link.classList.contains('blurred-link')) {
								link.addEventListener('click', (e) => {
									if (!e.target.classList.contains('copy-btn') && !e.target.classList.contains('fa-copy')) {
										const linkText = link.querySelector('.link-text').textContent;
										window.open(linkText, '_blank');
									}
								});
							}
						});
					});
				}

				// Function to validate URL
				function isValidUrl(url) {
					// Ensure URL has a protocol, add https:// if missing
					let processedUrl = url.trim();
					if (!processedUrl.match(/^https?:\/\//i)) {
						processedUrl = 'https://' + processedUrl;
					}

					try {
						new URL(processedUrl);
						return processedUrl;
					} catch (e) {
						return false;
					}
				}

				// Function to disable submit button during submission
				function disableSubmitButton() {
					if (submitBtn) {
						submitBtn.disabled = true;
						submitBtn.innerHTML = '<i class="fa-solid fa-circle-notch fa-spin"></i> Submitting...';
					}
				}

				// Function to re-enable submit button
				function enableSubmitButton() {
					if (submitBtn) {
						submitBtn.disabled = false;
						submitBtn.innerHTML = 'Submit Link';
					}
				}

				// Check if submission is allowed based on cooldown
				function canSubmit() {
					const now = Date.now();
					if (isSubmitting) {
						return false;
					}

					if (now - lastSubmissionTime < SUBMISSION_COOLDOWN) {
						const secondsLeft = Math.ceil((SUBMISSION_COOLDOWN - (now - lastSubmissionTime)) / 1000);
						alert(`Please wait ${secondsLeft} seconds before submitting another link.`);
						return false;
					}

					return true;
				}

				// Handle form submission
				submitLinkForm.addEventListener('submit', async (e) => {
					e.preventDefault();

					// Check if submission is allowed
					if (!canSubmit()) {
						return;
					}

					// First check if user is logged in using auth-controller.min.js
					if (!window.isLoggedIn || !window.isLoggedIn()) {
						loginAlert.style.display = 'block';
						submitSuccessMessage.style.display = 'none';
						submitErrorMessage.style.display = 'none';
						return;
					}

					const category = categorySelect.value;
					const linkInput = document.getElementById('linkInput').value.trim();
					const notes = document.getElementById('notesInput').value.trim();

					// Validate inputs
					if (!category) {
						alert('Please select a category');
						return;
					}

					// Process and validate URL
					const validatedUrl = isValidUrl(linkInput);
					if (!validatedUrl) {
						alert('Please enter a valid URL');
						return;
					}

					// Set submission status and disable button
					isSubmitting = true;
					disableSubmitButton();

					try {
						// Create JSON for updating links.json
						const linksData = await loadLinksData();
						const categories = linksData.categories || proxyCategories;

						// Find the category
						let categoryExists = false;
						for (let cat of categories) {
							if (cat.name === category) {
								categoryExists = true;
								// Add the new link if it doesn't already exist
								if (!cat.links.includes(validatedUrl)) {
									cat.links.unshift(validatedUrl);
								} else {
									// If link already exists, move it to the top
									const linkIndex = cat.links.indexOf(validatedUrl);
									if (linkIndex !== -1) {
										cat.links.splice(linkIndex, 1);
										cat.links.unshift(validatedUrl);
									}
								}
								break;
							}
						}

						// If category doesn't exist, create it (for Game Sites or Other)
						if (!categoryExists) {
							let icon = "fa-solid fa-gamepad";
							let status = "fresh";
							let description = "User submitted links";

							if (category === "Other") {
								icon = "fa-solid fa-link";
							} else if (category === "Game Sites") {
								icon = "fa-solid fa-gamepad";
								description = "Gaming websites";
							}

							categories.push({
								name: category,
								icon: icon,
								status: status,
								description: description,
								links: [validatedUrl]
							});
						}

						// Generate updated JSON content
						const updatedJsonData = JSON.stringify({ categories: categories }, null, 2);

						// Set up data for Discord webhook
						const webhookUrl = 'https://discord.com/api/webhooks/1350269659315835012/u3j0Txmtfb5dxaJYOoFQBW5fxbvyMS_OUffyBAekf1vtd_SfeQ_HdJJ37pvfiqGWwcp0';

						// Create approval link that will take you back to the site with the approve parameter
						const approveLink = `${window.location.origin}/ultimate-links.html?approvelink=${encodeURIComponent(validatedUrl)}`;

						// Send to Discord webhook
						const response = await fetch(webhookUrl, {
							method: 'POST',
							headers: {
								'Content-Type': 'application/json'
							},
							body: JSON.stringify({
								content: `<@635187446232907852>\n\nðŸ”” **New Link Submission** ðŸ””\n\nðŸ“ **Category:** ${category}\nðŸ”— **Link:** ${validatedUrl}\nðŸ“ **Notes:** ${notes || 'No additional notes'}\n\nâœ… **Approve:** ${approveLink}\nðŸ” **Test Link:** ${validatedUrl}\n\nâ° Submitted at: ${new Date().toLocaleString()}`
							})
						});

						if (response.ok) {
							// Hide form, login alert, and error message
							loginAlert.style.display = 'none';
							submitErrorMessage.style.display = 'none';

							// Show success message
							submitSuccessMessage.style.display = 'block';

							// Update last submission time
							lastSubmissionTime = Date.now();

						} else {
							throw new Error('Failed to send webhook');
						}
					} catch (error) {
						console.error('Submission error:', error);
						submitErrorMessage.style.display = 'block';
						submitSuccessMessage.style.display = 'none';
						loginAlert.style.display = 'none';
					} finally {
						// Re-enable submit button and reset submission status
						enableSubmitButton();
						isSubmitting = false;
					}
				});

				// Show the submit link modal when the button is clicked
				submitLinkButton.addEventListener('click', () => {
					submitLinkModal.style.display = 'flex';
					submitSuccessMessage.style.display = 'none';
					submitErrorMessage.style.display = 'none';

					// Show login alert if not logged in
					if (!window.isLoggedIn || !window.isLoggedIn()) {
						loginAlert.style.display = 'block';
					} else {
						loginAlert.style.display = 'none';
					}

					// Reset form
					submitLinkForm.reset();

					// Always enable the button when opening the modal
					enableSubmitButton();
				});

				// Close modals when close button is clicked
				document.getElementById('closeSubmitModal').addEventListener('click', () => {
					submitLinkModal.style.display = 'none';
				});

				// Close modals when clicking outside
				window.addEventListener('click', (event) => {
					if (event.target === submitLinkModal) {
						submitLinkModal.style.display = 'none';
					}
				});

				// Function to check for approvelink parameter in URL
				async function checkForApproveLink() {
					const urlParams = new URLSearchParams(window.location.search);
					const approveLink = urlParams.get('approvelink');

					if (approveLink) {
						try {
							// Load the current links data
							const response = await fetch('/json/links.json');
							if (!response.ok) {
								throw new Error('Failed to load links data');
							}

							const linksData = await response.json();
							const categories = linksData.categories;

							// Get the currently selected category from local storage if available
							// Otherwise use a default category (e.g., "Other")
							const selectedCategory = localStorage.getItem('approvalCategory') || "Other";

							// Find the selected category in the links data
							let categoryFound = false;
							for (const category of categories) {
								if (category.name === selectedCategory) {
									// Check if link already exists in this category
									if (!category.links.includes(approveLink)) {
										// Add link to the beginning of the array instead of the end
										category.links.unshift(approveLink);
									} else {
										// If link exists, remove it and add it to the beginning
										const linkIndex = category.links.indexOf(approveLink);
										if (linkIndex !== -1) {
											category.links.splice(linkIndex, 1);
											category.links.unshift(approveLink);
										}
									}
									categoryFound = true;
									break;
								}
							}

							// If category doesn't exist, create it
							if (!categoryFound) {
								let icon = "fa-solid fa-link";
								let status = "fresh";
								let description = "User submitted links";

								// Set specific properties for known categories
								if (selectedCategory === "Game Sites") {
									icon = "fa-solid fa-gamepad";
									description = "Gaming websites";
								}

								categories.push({
									name: selectedCategory,
									icon: icon,
									status: status,
									description: description,
									links: [approveLink] // Add as the first item in a new array
								});
							}

							// Create the updated JSON
							const updatedJson = JSON.stringify({ categories: categories }, null, 2);

							// Copy the updated JSON to clipboard
							await navigator.clipboard.writeText(updatedJson);

							// Show the approval success modal
							showApprovalModal(approveLink);

						} catch (error) {
							console.error('Error handling approval link:', error);
							// Show error modal
							showApprovalModal(approveLink, true);
						}
					}
				}

				// Function to show the approval modal
				function showApprovalModal(link, isError = false) {
					// Create modal overlay
					const modalOverlay = document.createElement('div');
					modalOverlay.className = 'modal-overlay';
					modalOverlay.style.display = 'flex';

					// Create modal content
					const modal = document.createElement('div');
					modal.className = 'modal';

					// Close button
					const closeButton = document.createElement('div');
					closeButton.className = 'modal-close';
					closeButton.innerHTML = '<i class="fa-solid fa-xmark"></i>';
					closeButton.addEventListener('click', () => {
						document.body.removeChild(modalOverlay);
					});

					// Modal header
					const header = document.createElement('div');
					header.className = 'modal-header';

					if (!isError) {
						header.innerHTML = `
                <h2><i class="fa-solid fa-check-circle" style="color: #4CAF50;"></i> Link Approved</h2>
                <p>Updated JSON has been copied to clipboard.</p>
            `;

						// Message content
						const content = document.createElement('div');
						content.style.marginTop = '20px';
						content.innerHTML = `
                <p>The updated JSON with link <strong>${link}</strong> has been copied to your clipboard.</p>
            `;

						modal.appendChild(closeButton);
						modal.appendChild(header);
						modal.appendChild(content);
					} else {
						header.innerHTML = `
                <h2><i class="fa-solid fa-triangle-exclamation" style="color: #F44336;"></i> Error</h2>
                <p>There was a problem adding the link.</p>
            `;

						// Message content
						const content = document.createElement('div');
						content.style.marginTop = '20px';
						content.innerHTML = `
                <p>An error occurred while trying to add <strong>${link}</strong> to the links database.</p>
                <p>Please check the console for details and try again.</p>
            `;

						modal.appendChild(closeButton);
						modal.appendChild(header);
						modal.appendChild(content);
					}

					modalOverlay.appendChild(modal);
					document.body.appendChild(modalOverlay);

					// Auto close after 10 seconds
					setTimeout(() => {
						if (document.body.contains(modalOverlay)) {
							document.body.removeChild(modalOverlay);
						}
					}, 10000);
				}

				// Initialize
				addFilterButtons();
				displayLinks();
				checkForApproveLink();

				// Set up search functionality
				searchInput.addEventListener('input', searchLinks);

				// Run blur fix after a small delay to ensure the DOM is fully processed
				setTimeout(fixBlurIssue, 100);

				// Handle scroll to top button
				const scrollTop = document.querySelector('.scrolltop');
				scrollTop.addEventListener('click', () => {
					window.scrollTo({
						top: 0,
						behavior: 'smooth'
					});
				});

				// Show/hide scroll to top button
				window.addEventListener('scroll', () => {
					if (window.scrollY > 300) {
						scrollTop.style.display = 'flex';
					} else {
						scrollTop.style.display = 'none';
					}
				});
			});
	</script>
	<script src="/js/localforage.min.js"></script>
	<script src="/js/json-loader.js"></script>
	<script src="/js/c.js"></script>
	<script src="/js/auth-controller.min.js"></script>
	<script src="/js/links-page-handler.min.js"></script>
	<script src="/js/themes.js"></script>
	<script type="text/javascript">
		document.addEventListener('DOMContentLoaded', function () {
			let hideAds = localStorage.getItem('hideAds');

			if (hideAds === null || hideAds === 'false') {
				let script = document.createElement('script');
				script.type = 'text/javascript';
				script.src =
					'https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3747175608041884';
				document.body.appendChild(script);
			}
		});
	</script>
</body>

</html>