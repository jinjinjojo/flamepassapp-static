<!doctype html>
<html lang="en">

<head>
	<link rel="stylesheet" href="/css/index.css" />
	<link rel="stylesheet" href="/css/themes.css" />
	<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" />
	<title>Games - Flamepass</title>
	<link rel="icon" type="icon/x-icon" href="/assets/favicon.ico" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<meta name="description" content="Flamepass: The Ultimate School Dashboard with games, website proxies, tools, AI chat & more. Your all-in-one student resource hub.." />
	<meta name="keywords" content="Proxy, Unblocker, Flamepass Unblocker, Flamepass" />
	<meta property="og:image" content="/assets/logo.webp" />
	<!-- Google Analytics DO NOT REMOVE -->
	<meta name="google-adsense-account" content="ca-pub-3747175608041884" />
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-SPVQHBL4J1"></script>
	<script>
		window.dataLayer = window.dataLayer || [];
		function gtag() {
			dataLayer.push(arguments);
		}
		gtag('js', new Date());

		gtag('config', 'G-SPVQHBL4J1');
	</script>

	<link rel="preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" />
	<link rel="preload" as="style"
		href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,100..1000;1,9..40,100..1000&display=swap" />
	<link rel="stylesheet" href="/css/index.css" />
	<link rel="stylesheet" href="/css/games.css" />
	<link rel="stylesheet" href="/css/ag.css" />
	<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" />
	<script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>
    <script src="/js/auth-controller.min.js"></script>
	<link rel="stylesheet" href="/css/common.css" />
</head>

<body>
	<!-- Navbar -->
	<ul class="navbar">
		<li style="margin-left: -1px; margin-top: 2px">
			<a href="/"><img class="logo" src="/assets/logo.webp" alt="Logo" /></a>
		</li>
		<hr style="margin-top: 5px" />
		<li>
			<a href="/" title="Home">
				<span style="margin-top: 0px" class="material-symbols-outlined">cottage</span>
			</a>
		</li>
		<li>
			<a href="/&.html" title="Search">
				<span class="material-symbols-outlined">public</span>
			</a>
		</li>
		<hr>
		<li>
			<a href="/a.html" title="Apps">
				<span class="material-symbols-outlined">apps</span>
			</a>
		</li>
		<li>
			<a href="/g.html" title="Games">
				<span id="navactive" class="material-symbols-outlined">joystick</span>
			</a>
		</li>
		<li>
			<a href="/downloadable-games.html" title="Downloadable Games">
				<span class="material-symbols-outlined">download</span>
			</a>
		</li>
		<hr>
		<li>
			<a href="/ultimate-links.html" title="Ultimate Link List">
				<span class="material-symbols-outlined">list</span>
			</a>
		</li>
		<li>
			<a href="/links.html" title="Link Generator">
				<span class="material-symbols-outlined">link</span>
			</a>
		</li>
		<hr>
		<li>
			<a href="/guides.html" title="Guides and Methods">
				<span class="material-symbols-outlined">help_outline</span>
			</a>
		</li>
		<li>
			<a href="/yt-channels.html" title="Unblocker YouTube Channels">
				<span class="material-symbols-outlined">play_circle</span>
			</a>
		</li>
		<hr>
		<li>
			<a href="/ai.html" title="AI Chat">
				<span class="material-symbols-outlined">smart_toy</span>
			</a>
		</li>
		<hr />
		<li>
			<a href="/~.html" title="Settings">
				<span style="margin-top: 0" class="material-symbols-outlined">tune</span>
			</a>
		</li>
		<li>
			<a href="/discord.html" title="Discord Server">
				<div style="height: 40px !important; width: 40px !important; margin-top: 10px; margin-bottom: -6px;">
					<i class="fa-brands fa-discord" style="transform: translateY(-6px)"></i>
				</div>
			</a>
		</li>
	</ul>

	<!-- Scroll to top button -->
	<div class="scrolltop">
		<span class="material-symbols-outlined">arrow_upward</span>
	</div>

	<!-- Main content wrapper -->
	<div class="page-structure">
		<!-- 1. Search and Random button -->
		<div class="search-container">
			<button class="randomBtn">
				Random Game
				<span style="color: #868686;padding: 0px;"
					class="material-symbols-outlined">shuffle</span>
			</button>
			<div style="animation: fade-in-top 1s" class="search-header">
				<input style="padding-right: 38px; padding-left: 38px; text-overflow: ellipsis;"
					placeholder="Search Flamepass for Games..." class="search-header__input gameSearchInput"
					type="text" />
				<button class="search-header__button" aria-label="Search Button">
					<svg fill="none" viewBox="0 0 18 18" height="18" width="18" class="search-header__icon">
						<path fill="#3A3A3A"
							d="M7.132 0C3.197 0 0 3.124 0 6.97c0 3.844 3.197 6.969 7.132 6.969 1.557 0 2.995-.49 4.169-1.32L16.82 18 18 16.847l-5.454-5.342a6.846 6.846 0 0 0 1.718-4.536C14.264 3.124 11.067 0 7.132 0zm0 .82c3.48 0 6.293 2.748 6.293 6.15 0 3.4-2.813 6.149-6.293 6.149S.839 10.37.839 6.969C.839 3.568 3.651.82 7.132.82z">
						</path>
					</svg>
				</button>
			</div>
		</div>

		<!-- 2. Category selector - will be added by JS -->
		<div id="category-container"></div>

		<!-- 3. Top pagination - will be added by JS -->
		<div id="pagination-top"></div>

		<!-- 4. Game grid - games will be added by JS -->
		<!-- IMPORTANT: No inline styles here -->
		<div class="gameContain"></div>

		<!-- 5. Bottom pagination - will be added by JS -->
		<div id="pagination-bottom"></div>
	</div>

	<!-- Background effects -->
	<div style="z-index: -998">
		<div style="z-index: -998; position: fixed" class="blob"></div>
		<div style="z-index: -998; position: fixed" class="blobbig"></div>
		<div style="z-index: -998; position: fixed" class="blobsmall"></div>
		<div style="z-index: -998; position: fixed" class="blobtop"></div>
		<div style="z-index: -999; position: fixed" id="particles-js"></div>
	</div>

	<script>
		particlesJS('particles-js', {
			particles: {
				number: {
					value: 86,
					density: {
						enable: true,
						value_area: 800
					}
				},
				color: {
					value: '#ffffff'
				},
				shape: {
					type: 'circle',
					stroke: {
						width: 0,
						color: '#000000'
					},
					polygon: {
						nb_sides: 5
					},
					image: {
						src: 'img/github.svg',
						width: 100,
						height: 100
					}
				},
				opacity: {
					value: 1,
					random: true,
					anim: {
						enable: false,
						speed: 1,
						opacity_min: 0.1,
						sync: false
					}
				},
				size: {
					value: 2,
					random: true,
					anim: {
						enable: false,
						speed: 40,
						size_min: 0.1,
						sync: false
					}
				},
				line_linked: {
					enable: false,
					distance: 150,
					color: '#ffffff',
					opacity: 0.4,
					width: 1
				},
				move: {
					enable: true,
					speed: 0.5,
					direction: 'top',
					random: false,
					straight: false,
					out_mode: 'out',
					bounce: false,
					attract: {
						enable: false,
						rotateX: 318.0130544358847,
						rotateY: 556.5228452627983
					}
				}
			},
			interactivity: {
				detect_on: 'window',
				events: {
					onhover: {
						enable: false,
						mode: 'repulse'
					},
					onclick: {
						enable: true,
						mode: 'push'
					},
					resize: true
				},
				modes: {
					grab: {
						distance: 400,
						line_linked: {
							opacity: 1
						}
					},
					bubble: {
						distance: 400,
						size: 40,
						duration: 2,
						opacity: 8,
						speed: 3
					},
					repulse: {
						distance: 200,
						duration: 0.4
					},
					push: {
						particles_nb: 10
					},
					remove: {
						particles_nb: 10
					}
				}
			},
			retina_detect: true
		});
	</script>
	<script src="/js/localforage.min.js"></script>
	<script src="/js/json-loader.js"></script>
	<script src="/js/themes.js"></script>
	<script src="/js/c.js"></script>
	<script type="text/javascript">
		document.addEventListener('DOMContentLoaded', function () {
			let hideAds = localStorage.getItem('hideAds');

			if (hideAds === null || hideAds === 'false') {
				let script = document.createElement('script');
				script.type = 'text/javascript';
				script.src =
					'https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3747175608041884';
				document.body.appendChild(script);
			}
		});
	</script>

	<!-- Game Search Implementation -->
	<script>
		document.addEventListener('DOMContentLoaded', function() {
			// Get the search input
			const searchInput = document.querySelector('.gameSearchInput');
			if (!searchInput) return;

			// Create search results container
			const searchResultsContainer = document.createElement('div');
			searchResultsContainer.className = 'search-results-container';
			searchResultsContainer.style.cssText = `
				position: absolute;
				top: 100%;
				left: 0;
				right: 0;
				background-color: rgba(30, 30, 30, 0.95);
				border-radius: 8px;
				box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
				max-height: 400px;
				overflow-y: auto;
				z-index: 2000;
				display: none;
				margin-top: 5px;
				padding: 10px;
			`;

			// Add the search results container after the search input's parent
			const searchContainer = document.querySelector('.search-container');
			if (searchContainer) {
				searchContainer.style.position = 'relative';
				searchContainer.appendChild(searchResultsContainer);
			}

			// Add styles for search result cards
			const style = document.createElement('style');
			style.textContent = `
				.search-result-card {
					display: flex;
					align-items: center;
					padding: 10px;
					margin-bottom: 8px;
					background-color: rgba(50, 50, 50, 0.7);
					border-radius: 6px;
					cursor: pointer;
					transition: background-color 0.2s ease;
					text-decoration: none;
					color: white;
				}
				.search-result-card:hover {
					background-color: rgba(70, 70, 70, 0.9);
				}
				.search-result-image {
					width: 60px;
					height: 60px;
					object-fit: cover;
					border-radius: 4px;
					margin-right: 15px;
				}
				.search-result-info {
					flex: 1;
				}
				.search-result-title {
					font-weight: 600;
					margin-bottom: 4px;
					font-size: 16px;
				}
				.search-result-category {
					font-size: 12px;
					color: #aaa;
				}
				.no-results {
					padding: 15px;
					text-align: center;
					color: #aaa;
				}
				.search-results-container::-webkit-scrollbar {
					width: 8px;
				}
				.search-results-container::-webkit-scrollbar-track {
					background: rgba(30, 30, 30, 0.5);
					border-radius: 4px;
				}
				.search-results-container::-webkit-scrollbar-thumb {
					background: rgba(255, 102, 0, 0.7);
					border-radius: 4px;
				}
				.search-results-container::-webkit-scrollbar-thumb:hover {
					background: rgba(255, 102, 0, 0.9);
				}
			`;
			document.head.appendChild(style);

			// Function to fetch games from IndexedDB
			async function fetchGames() {
				try {
					// Check if we have the fetchGames function from json-loader.js
					if (window.fetchGames) {
						return await window.fetchGames();
					}
					
					// Fallback to direct fetch if the function is not available
					const response = await fetch('/json/g.json');
					if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
					return await response.json();
				} catch (error) {
					console.error('Error fetching games:', error);
					return [];
				}
			}

			// Function to create a search result card
			function createSearchResultCard(game) {
				const card = document.createElement('a');
				card.href = `/game/${game.slug || game.name.toLowerCase().replace(/\s+/g, '-')}`;
				card.className = 'search-result-card';
				
				const image = document.createElement('img');
				image.src = game.img || '/assets/default.png';
				image.alt = game.name;
				image.className = 'search-result-image';
				image.onerror = () => {
					image.src = '/assets/default.png';
				};
				
				const info = document.createElement('div');
				info.className = 'search-result-info';
				
				const title = document.createElement('div');
				title.className = 'search-result-title';
				title.textContent = game.name;
				
				const category = document.createElement('div');
				category.className = 'search-result-category';
				category.textContent = game.category ? 
					game.category.charAt(0).toUpperCase() + game.category.slice(1) + ' Game' : 
					'Browser Game';
				
				info.appendChild(title);
				info.appendChild(category);
				
				card.appendChild(image);
				card.appendChild(info);
				
				return card;
			}

			// Function to perform search
			async function performSearch(query) {
				if (!query) {
					searchResultsContainer.style.display = 'none';
					return;
				}
				
				// Show loading state
				searchResultsContainer.innerHTML = '<div class="no-results">Searching...</div>';
				searchResultsContainer.style.display = 'block';
				
				try {
					// Get all games
					const games = await fetchGames();
					
					// Filter games based on search query
					const searchResults = games.filter(game => 
						game.name.toLowerCase().includes(query.toLowerCase())
					).slice(0, 10); // Limit to 10 results
					
					// Clear previous results
					searchResultsContainer.innerHTML = '';
					
					if (searchResults.length === 0) {
						searchResultsContainer.innerHTML = '<div class="no-results">No games found</div>';
					} else {
						// Add search result cards
						searchResults.forEach(game => {
							searchResultsContainer.appendChild(createSearchResultCard(game));
						});
					}
				} catch (error) {
					console.error('Error performing search:', error);
					searchResultsContainer.innerHTML = '<div class="no-results">Error searching games</div>';
				}
			}

			// Set up debounce function to limit API calls
			function debounce(func, wait) {
				let timeout;
				return function(...args) {
					clearTimeout(timeout);
					timeout = setTimeout(() => func.apply(this, args), wait);
				};
			}

			// Add event listener to search input with debounce
			searchInput.addEventListener('input', debounce(function() {
				const query = this.value.trim();
				performSearch(query);
			}, 300));

			// Close search results when clicking outside
			document.addEventListener('click', function(event) {
				if (!searchContainer.contains(event.target)) {
					searchResultsContainer.style.display = 'none';
				}
			});

			// Show search results when focusing on search input
			searchInput.addEventListener('focus', function() {
				if (this.value.trim()) {
					searchResultsContainer.style.display = 'block';
				}
			});
		});
	</script>
</body>

</html>